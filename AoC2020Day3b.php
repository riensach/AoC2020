<?php

$puzzleInput = ".........#....#.###.........##.
..###.#......#......#.......##.
##....#.#.......#.....#........
#........#..........#.#...#...#
#....###...##.....#........#...
###..............##..#.....#...
.................##.#..........
.........##......#..###.....#.#
..#..#...#.#.#...#.#.#.##...#..
..............#.#.#..#..#..#...
.#.#.#....#.........#.........#
..#.#....##..#...#.....#..##..#
............#.....#.........##.
...#.#..#..........#.##.....#..
#......#...##.......###........
.....#....#.#..............#...
.....#.......#..##.###.....#.#.
.#.....#....##.#......##......#
..##...##.........#..#.#..#....
............#.......#.....#....
.......................#...####
.#.#.......#..#....#....##..#.#
..#.##.#.#...............#.....
#..##..#...#.....##..#...##.#..
##...#....#####.....##...#...##
.#..##..#..#.#..##.#.#........#
....#..#........##......#.#....
..#......#...##.#..##.......#..
.#.#....#.#..#.....#..#...#....
.....#.#.................#.....
##.#........#.....#...........#
#............#.....#..#.#...##.
..#.#..#......#.......#......##
....#.#....#...#....#..........
.........#...#.##..#...#...#...
....#...#...#..................
..##...#.#....#...#......#.....
#....#.......##..#...#..#......
.#....##..#.#....#...##...#....
#.................#...#.#...#..
.#.....#..........#.......#....
.#..........#.##....#.##......#
#.#.....##.##..#.......#..#....
.....#...#............#..##....
...#.#.##.#..........#.#....#..
.......#...#............#.....#
..........#...##..#....###....#
............#....#......###....
...................####..#.##..
...#.#.##.........#..#.#.......
...........#.........#..###....
.........#.........#...#...###.
.#.#.##....#.#...........#.#...
..###.....#...#.#.......##..#..
.....#.#........#.#....#....##.
......#...#........#.........#.
...............#.........#.#...
..#...#...#...#.###..###....#..
#..#.......#..###.##.......#...
#.#.........##..#.....###..#..#
...#....#....#.#..#............
..###..##....................#.
..#.......#..........#.##......
..##........#...###..##.#......
......#.#...#.....#..##..#.....
#........#......#..............
........#........#.......#....#
.....#.......#......#........##
#.#......#.#...##.#.......#....
#...................##...#.....
..#.#...#..#...#..#.....#..#...
.......##..................##..
.............#..##.#......##..#
###...........##.#....###..#...
.#..........##...#..#......#...
..#.###.#....#........#........
....#....###.....#.......#.....
.....##....#..##...#..#........
.##...#..#....#..#.........#...
#.........##....#..##..##......
.#.#.............#.....##......
..#.#............#.......##.#..
..#.##..#.........#......#.#.#.
.#...#...#..#....#...#....#.#.#
....#...#..#.##..##.......##...
.#.....#.....#............#....
..........#....#..#..#......#..
.............#....#..#.........
....#.#.#.......#....#.#.......
..##....#.#....#...#........###
#...#..........#..........###..
...#..#...#...#..##......#...#.
.....................#...#..#.#
#..#............#.........#.##.
..#...#...........#.......#....
.....##..........#...##.....##.
.#.....#.#........##...........
..#....#..#.#..##...#.........#
.........#.###.##....#..###....
.........#...##...##.#.#....##.
...#..##.#...........#....#....
..........#.#...........##.....
...........#..........#...##...
.........#..........#...#.#...#
......#..#.................#...
.....#...........#..#...#..###.
.....#..#....#.#.##...##....##.
...##.###.#.#..#.#....##.#.#...
###.....#.....#........#...#...
.#....#........#.#....#..#...##
##.....#.....#......#.#..#...##
.##....#...............#.......
#.#.....#.#....#.........#.....
..#...............#.......##...
#...#.###..#....#.#.#..#.#.....
##.###....##...#....#.....#....
.......#................##.....
....#....##..#....#..#......#..
...#.........#...#........##.##
.#..............#..............
..##.......#.###..##.#.........
..#...#...#...#...#...#.....##.
.....#..##...#.....##..#.#.....
..#.............#...#.........#
#.........................#..##
.............#..###........#...
......#..#....#.##.......#..#..
...#..#..#...#....#..#...##...#
.##............#.......###.#...
.#........#..#.................
#.#.#.....##....##...#.....#.#.
...##.......#.#......#...#.#...
#.##....#.........#.....##...#.
#...#..#....#.......#.##...##..
.................##.#..##.#.#.#
..#.............#.......#.#.##.
#....##..................#...##
..........#.......#..##........
......#.#..#......#.#.........#
#.#........#####......#.#.#....
#..#........#.#..#.....#.......
...#.............#.............
.....#.......#......#..#.##..#.
..#.........#..........#.##...#
#.....#.#####......#.......###.
.......#.....#...#.....#.#..#..
#...#.#........#.#..#..#...#..#
...#....#....##.....#..........
.#.......##.......##...........
...#.##.#.#..#....#...##....##.
.#...#...#.........#...........
.#.#.##..#.......#.#...#..#....
.#....##.#.#...#......#......#.
##..#..#..#..#.......#......#..
.........#.#...........#....#.#
........#....#.#...#.#..#......
#.......#.#.................##.
.....#..#..#....#.#........#.##
.#..###..#....#..#........#.#..
#...........#...#........#.....
........#..#.#.#.#.......#....#
....#..#..........#.#..#.....#.
..####..........#..............
....###.#..#........##..#......
.#..#......##..........#...#...
.#.....#....#......##.##...#.##
..##.#.#......#.......##.......
....##.......#..............#..
........#.....##..............#
.#...#....##.....#....#.......#
....#.......###.......#.#.#....
##.....##........#.....##......
..........#.....#...##.#..#.#..
..........#.#......#..........#
..........#...#..#...#...#.....
.#.......#..##.................
.#........##..............#..#.
.##...................#...#....
.##....#.##.##........#........
...##.....####.....#..#.......#
...##.#...##...#.##............
##.......#.....###..#..#...##..
#.####...#...#...##..#..#....#.
...#........##........#........
#....#.#....##..#..#.##...#....
...##....##....#.......#..###..
..........#..#..........#..#.#.
#..#....#.......#.......#....#.
......#......#.....##..##.#..#.
##.#.....#....#.......#...#...#
..##..#.#...#...#.....###..##..
....#..#.......#............##.
#..##.#.#.....#####....#....#..
.#........#...#.#..##.#.####.#.
#...#...#.............#.#......
.........#.....##..........#...
.##....#....#........#......#.#
#..###...#....#..........#.....
.#...##.........#..#..#.#...#..
#.#.#.......................#..
#.....#..#.#............###....
#...#.....#.....###..#..#.#.##.
............#.........#.#.##...
...#.......###......##......#..
.#....#.#....##......##.#...#..
.........#.......#....#...##..#
................#.#.....#....#.
.##......#....#..#..###..#...#.
....##....#..#....#.##..#......
.......#.#.....#..#............
..........#....#....#..#..#....
..#....#.....#.......#.........
......#.........#.##..#....##.#
..#..#.#.......##..#...##......
...##..#.#.#...............##..
..#.#.#......#....#.....#.##...
..#.....#.#...........#....##..
###.....##.....................
.......#..#.................#..
.#.#..#..#.........#......#...#
##.......#.##.......#..........
#..#.....#.....#.....#.......#.
#..#.....#.....#..........#.#..
.#....##....#.....#.......#.##.
.....#.#......##..##.#.........
#....##......#..#....#..##..#..
#.##..#..#..............#...#..
.#......#......#..#...........#
..#.......#........#....#..#...
.....##.#.......##....#.#....#.
........#....................#.
........#..#..........#........
......#.#.....#.#.....#......#.
#......##......###.##......#...
...........###..#...#.......#..
..#...###...#.....#....#...#..#
.....##......#.#......##..#.#..
#.#......##...#.....##...#...#.
.#.#........#.......#.........#
....#....#...##..........#.#...
.#..##.#...#.#.....##......##..
.#.....#..##....#....#....#..#.
..#.......#.#.#..........#..#..
#.#..#....#.##....#.......#....
........##.........#..#.#......
.......#.....#.##..##......#.#.
.........................#.#.#.
..#..............##.........#..
.......###.#.#.......#.........
#........#.....#.......#..#...#
##....#..#....#...........#....
..#..#.#.#.....#.#..#....#.....
.#..##....#.##..#..............
...#....##..#..#.##....#.#.....
...##....#......##..#........#.
....#......#....#....#........#
...#..#...#.#...........#..#..#
....#.#.#.........#...#...#....
..........#....#......##....#.#
..##..#...##.#...###.#.##......
#........#.##......##.#........
..#...#.##...#..........#.#...#
...........#...........#.......
......###....#..###..##........
...#........#..#.#.............
....#.#.....#.#............#..#
##.#.....#........#....##.....#
.......#.#...#..##.......#.#.#.
#......##..#..#...#.....#..#.#.
.#......###.....#..#.....#...#.
....#.#.............#.##.......
......#....#.....#.......#..#..
#..#.#.#..#......#...#..#.#....
#..............#.#....#...#....
..#......#...##.#......#..#..#.
.......##..#.##..#.#...#.....##
.....#...........#....#.......#
.#.........#..#..........##....
#..##..#.#......##.......#..#..
...#....#...........##.#.#.#..#
#..#..#..#...........#....#.#.#
.....##......#......#.#...#....
.....#..##....###.....#....##..
........#...##......#.....#..#.
..#.#..#.#....#...#.......#....
#.....#...#.....#.#.......#....
......#...#.......#..##....#...
#............#.....#....#......
..##...#.....#..#......#...#...
...#..#...#..#.......#........#
...##.#.#........#........#....
#.#..#......##.#..#..#......#..
#.......#..#...................
#.....#....#......#...........#
.##.#...#.#...#..............##
...###........#........#..##.#.
..##....#.#.#.##..#.#......#...
..#.#........#..............#..
.......#.................##....
..................#............
....#.....#.#..............#.##
......#.....#..#......#...#....
..#....##......#...####....#.#.
..........#...##...........##.#
...#.#..#....#......#..#....#..
#.........###...#.....#..#....#
.#.#......##.#.....#...........
...............#.#....##..#..#.
..........#.#.#.#...#....##...#
...#....##.................##..
#..##..#...##.##.#......#.#.###
#..#...#..#.....#...#.#..##...#
..#................#...##....#.
...#.....#.##.......##....#.#..
....#.....#..#....##...........
...............#..........#....
....#...#........##...#........
...#....#...#.###..............
#.#....#.......#..#.##.##......
.#.....#..#..#......#....#.#...
...#..........................#
............#.#..#.##......#...
.....#..........#.#........#.#.";


//$puzzleInput =
//"..##.......
//#...#...#..
//.#....#..#.
//..#.#...#.#
//.#...##..#.
//..#.##.....
//.#.#.#....#
//.#........#
//#.##...#...
//#...##....#
//.#..#...#.#";

//2248879500 too low

$inputArray = explode("\n",$puzzleInput);
$countColumns = 0;
$countRows = count($inputArray);
$rowData = array();

foreach($inputArray as $key => $value) {
    $rowData[$key] = new \Ds\Deque([]);
    $rowArrayInfo = str_split($value,1);
    $countColumns = count($rowArrayInfo)+1;
    foreach($rowArrayInfo as $key2 => $value2) {
        $rowData[$key]->push($value2);
    }
}

$treeCount1 = loopInfo(1,1,$countRows,$countColumns,$rowData);
$treeCount2 = loopInfo(1,3,$countRows,$countColumns,$rowData);
$treeCount3 = loopInfo(1,5,$countRows,$countColumns,$rowData);
$treeCount4 = loopInfo(1,7,$countRows,$countColumns,$rowData);
$treeCount5 = loopInfo(2,1,$countRows,$countColumns,$rowData);
// 2832009600
function loopInfo($rowInc,$columnInc,$countRows,$countColumns,$rowData)
{
    $currentRow = 0;
    $currentColumn = 0;
    $treeCount = 0;
    while ($currentRow < $countRows) {
        // Loop until we get to the bottom
        if ($currentColumn == ($countColumns - 1)) {
            $currentColumn = 0;
        } elseif ($currentColumn >= $countColumns) {
            $currentColumn = ($currentColumn % $countColumns) + 1;
        }

        if ($rowData[$currentRow]->get($currentColumn) == '#') {
            $treeCount++;
        }

        $currentRow = $currentRow + $rowInc;
        $currentColumn = $currentColumn + $columnInc;
    }
    return $treeCount;
}
$treeCount = $treeCount1 * $treeCount2 * $treeCount3 * $treeCount4 * $treeCount5;
echo "Tree Count: $treeCount1 - $treeCount2 - $treeCount3 - $treeCount4 - $treeCount5 :: $treeCount<BR><BR>";
printGrid($rowData);


function printGrid($trackGridInputArray) {
    echo "<code>";
    foreach($trackGridInputArray as $rowID => $rowColumn) {
        foreach ($rowColumn as $columnID => $gridData){
            if($gridData==" ") $gridData = "&nbsp;";
            echo "$gridData ";
        }
        echo "<br>";
    }
    echo "</code>";
}